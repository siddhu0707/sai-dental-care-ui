<div class="dashboard-container">
  <header class="dashboard-header">
    <h1 class="page-title">{{ 'dashboard.title' | translate }}</h1>
    <p class="page-subtitle">{{ 'dashboard.subtitle' | translate }}</p>
  </header>
  
  <div class="stats-grid">
    <div class="stat-card patients">
      <div class="stat-icon">ğŸ‘¥</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ totalPatients }}</h3>
        <p class="stat-label">{{ 'dashboard.totalPatients' | translate }}</p>
      </div>
    </div>

    <div class="stat-card appointments">
      <div class="stat-icon">ğŸ“…</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ todayAppointments }}</h3>
        <p class="stat-label">{{ 'dashboard.todayAppointments' | translate }}</p>
      </div>
    </div>

    <div class="stat-card revenue">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <h3 class="stat-value">â‚¹{{ monthlyRevenue | number }}</h3>
        <p class="stat-label">{{ 'dashboard.monthlyRevenue' | translate }}</p>
      </div>
    </div>

    <div class="stat-card pending">
      <div class="stat-icon">â°</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ pendingBills }}</h3>
        <p class="stat-label">{{ 'dashboard.pendingBills' | translate }}</p>
      </div>
    </div>
  </div>
  
  <div class="dashboard-content">
    <div class="content-left">
      <div class="widget">
        <div class="widget-header">
          <h3 class="widget-title">{{ 'dashboard.todayAppointments' | translate }}</h3>
          <a routerLink="/appointments" class="view-all-link">{{ 'common.view' | translate }} {{ 'common.all' | translate }}</a>
        </div>
        <div class="appointment-list">
          <div *ngFor="let appointment of upcomingAppointments" class="appointment-item">
            <div class="appointment-time">{{ appointment.time }}</div>
            <div class="appointment-details">
              <h4 class="patient-name">{{ appointment.patientName }}</h4>
              <p class="appointment-type">{{ appointment.type }}</p>
            </div>
            <div class="appointment-status" [class]="appointment.status">
        {{ appointment.status | titlecase }}
      </div>
          </div>
          
          <div *ngIf="upcomingAppointments.length === 0" class="empty-state">
            <p>{{ 'common.noAppointments' | translate }}</p>
          </div>
        </div>
      </div>

      <div class="widget">
        <div class="widget-header">
          <h3 class="widget-title">{{ 'common.recent' | translate }} {{ 'nav.patients' | translate }}</h3>
          <a routerLink="/patients" class="view-all-link">{{ 'common.view' | translate }} {{ 'common.all' | translate }}</a>
        </div>
        <div class="patient-list">
          <div *ngFor="let patient of recentPatients" class="patient-item">
            <div class="patient-avatar">{{ patient.name.charAt(0) }}</div>
            <div class="patient-info">
              <h4 class="patient-name">{{ patient.name }}</h4>
              <p class="patient-details">{{ patient.phone }} â€¢ Last visit: {{ patient.lastVisit }}</p>
            </div>
            <div class="patient-actions">
              <button class="action-btn">{{ 'common.view' | translate }}</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="content-right">
      <div class="widget">
        <div class="widget-header">
          <h3 class="widget-title">{{ 'billing.outstandingAmount' | translate }}</h3>
          <a routerLink="/billing" class="view-all-link">{{ 'common.view' | translate }} {{ 'common.all' | translate }}</a>
        </div>
        <div class="balance-list">
          <div *ngFor="let balance of topDebtors" class="balance-item">
            <div class="balance-patient">
              <h4 class="patient-name">{{ balance.patientName }}</h4>
              <p class="balance-details">{{ 'common.total' | translate }} {{ 'common.billed' | translate }}: â‚¹{{ balance.totalBilled | number:'1.2-2' }}</p>
              <p class="balance-details">{{ 'common.paid' | translate }}: â‚¹{{ balance.totalPaid | number:'1.2-2' }}</p>
            </div>
            <div class="balance-amount outstanding">
              â‚¹{{ balance.remainingBalance | number:'1.2-2' }}
            </div>
          </div>

          <div *ngIf="topDebtors.length === 0" class="empty-state">
            <p>{{ 'dashboard.allPaid' | translate }} ğŸ‰</p>
          </div>
        </div>
      </div>

      <div class="widget">
        <div class="widget-header">
          <h3 class="widget-title">{{ 'dashboard.alerts' | translate }}</h3>
        </div>
        <div class="alerts-list">
          <div *ngFor="let alert of alerts" class="alert-item" [class]="alert.type">
            <div class="alert-icon">{{ alert.icon }}</div>
            <div class="alert-content">
              <h4 class="alert-title">{{ alert.title }}</h4>
              <p class="alert-message">{{ alert.message }}</p>
              <span class="alert-time">{{ alert.time }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="widget">
        <div class="widget-header">
          <h3 class="widget-title">{{ 'common.quickActions' | translate }}</h3>
        </div>
        <div class="quick-actions">
          <button routerLink="/patients" class="action-button primary">
            <span class="action-icon">ğŸ‘¤</span>
            {{ 'dashboard.addPatient' | translate }}
          </button>
          <button routerLink="/appointments" class="action-button secondary">
            <span class="action-icon">ğŸ“…</span>
            {{ 'dashboard.scheduleAppointment' | translate }}
          </button>
          <button routerLink="/billing" class="action-button tertiary">
            <span class="action-icon">ğŸ’³</span>
            {{ 'dashboard.createBill' | translate }}
          </button>
        </div>
      </div>

      <!-- Backend Test Component (Temporary) -->
      <app-backend-test></app-backend-test>
    </div>
  </div>
</div>
